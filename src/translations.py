TRANSLATIONS = {
    "EN": {
        "error_critical_dir": "CRITICAL ERROR: Cannot create data directory",
        "error_critical_write": "CRITICAL ERROR: Database is not writable",
        "check_permissions": "Please check file permissions.",
        "database_error": "Database Error",
        "database_locked_hint": "Hint: The database might be locked by another process or permissions are denied.",
        "invalid_date_format": "Error: Invalid date format. Please use dd/mm/yyyy.",
        "timer_already_running": "Timer is already running! â³",
        "timer_started": "TIMER STARTED",
        "timer_not_running": "Timer is NOT running! ðŸ›‘",
        "timer_stopped": "TIMER STOPPED",
        "stopped_at": "Stopped at",
        "duration": "Duration",
        "current_session": "Current Session",
        "active_timer": "Active Timer",
        "timer_inactive": "Timer is inactive. ðŸ’¤",
        "daily_summary": "Daily Summary",
        "total_time_today": "Total Time Today",
        "database_path": "Database Path",
        "database_exist_error": "Database does not exist yet!",
        "backup_created": "Backup created",
        "location": "Location",
        "total_time_on": "Total Time on",
        "historical_data": "Historical Data",
        "range_summary": "Range Summary",
        "total_time": "Total Time",
        "first_start_today": "First Start Today",
        "no_sessions_today": "No sessions started today.",
        "first_start_on": "First Start on",
        "no_sessions_found": "No sessions found on",
        "database_empty": "Database empty.",
        "clear_confirmation": "Are you sure you want to delete ALL tracking data? (Backups are safe)",
        "aborted": "Aborted.",
        "database_cleared": "Database CLEARED. ðŸ—‘ï¸",
        "welcome_banner": "Visual Time Tracker",
        "col_command": "Command",
        "col_desc": "Description",
        "col_usage": "Usage",
        "desc_on": "Start the timer",
        "desc_off": "Stop the timer",
        "desc_time": "Current session duration",
        "desc_time_today": "Total time worked today",
        "desc_db": "Show database path",
        "desc_backup": "Backup database",
        "desc_time_select": "Time for specific day",
        "desc_time_range": "Time for date range",
        "desc_init_time": "First start time today",
        "desc_init_time_when": "First start on specific day",
        "desc_clear_all": "Clear all data",
        "desc_lang": "Show current language",
        "desc_lang_set": "Change language",
        "language_current": "Current Language",
        "language_select": "Select Language",
        "language_updated": "Language updated to",
        "help_footer": "Use 'work [COMMAND] --help' for more info.",
        "ai_config_menu": "AI Provider Configuration",
        "ai_provider_select": "Select AI Provider (GEMINI/OPENAI)",
        "ai_key_prompt": "Enter API Key",
        "ai_key_saved": "API Key saved for",
        "ai_analyzing": "Analyzing data with",
        "ai_error": "AI Error",
        "desc_ai_config": "Configure AI Provider",
        "desc_ai_gen_ask": "Ask AI (Full Context)",
        "desc_ai_range_ask": "Ask AI (Date Range)",
        "desc_export_csv": "Export history to CSV",
        "desc_export_pdf": "Export history to PDF Report",
        "export_csv_success": "Data exported to CSV",
        "export_pdf_success": "PDF Report generated",
        "header_date": "Date",
        "header_start": "Start",
        "header_end": "End",
        "header_duration": "Duration",
        "report_title": "Work History Report",
        "report_summary": "Summary",
        "total_sessions": "Total Sessions",
        "total_duration": "Total Duration",
        "desc_load_backup": "Restore backup file",
        "desc_config_backup": "Configure Auto-Backup",
        "backup_restore_confirm": "WARNING: This will overwrite current data. Restore from",
        "backup_restored": "Database successfully restored.",
        "backup_not_found": "Backup file not found.",
        "backup_config_updated": "Auto-backup frequency set to",
        "backup_auto_triggered": "Auto-backup triggered",
        "tip_use_description": "Tip: You can add a description: work ON 'Task Name'",
        "header_desc": "Description"
    },
    "ES": {
        "error_critical_dir": "ERROR CRÃTICO: No se puede crear el directorio de datos",
        "error_critical_write": "ERROR CRÃTICO: La base de datos no es escribible",
        "check_permissions": "Por favor verifique los permisos.",
        "database_error": "Error de Base de Datos",
        "database_locked_hint": "Consejo: La base de datos puede estar bloqueada o sin permisos.",
        "invalid_date_format": "Error: Formato de fecha invÃ¡lido. Use dd/mm/yyyy.",
        "timer_already_running": "Â¡El temporizador ya estÃ¡ corriendo! â³",
        "timer_started": "TEMPORIZADOR INICIADO",
        "timer_not_running": "Â¡El temporizador NO estÃ¡ corriendo! ðŸ›‘",
        "timer_stopped": "TEMPORIZADOR DETENIDO",
        "stopped_at": "Detenido a las",
        "duration": "DuraciÃ³n",
        "current_session": "SesiÃ³n Actual",
        "active_timer": "Temporizador Activo",
        "timer_inactive": "Temporizador inactivo. ðŸ’¤",
        "daily_summary": "Resumen Diario",
        "total_time_today": "Tiempo Total Hoy",
        "database_path": "Ruta de Base de Datos",
        "database_exist_error": "Â¡La base de datos aÃºn no existe!",
        "backup_created": "Copia de seguridad creada",
        "location": "UbicaciÃ³n",
        "total_time_on": "Tiempo Total el",
        "historical_data": "Datos HistÃ³ricos",
        "range_summary": "Resumen de Rango",
        "total_time": "Tiempo Total",
        "first_start_today": "Primer Inicio Hoy",
        "no_sessions_today": "No hay sesiones iniciadas hoy.",
        "first_start_on": "Primer Inicio el",
        "no_sessions_found": "No se encontraron sesiones el",
        "database_empty": "Base de datos vacÃ­a.",
        "clear_confirmation": "Â¿EstÃ¡ seguro de borrar TODOS los datos? (Las copias de seguridad estÃ¡n seguras)",
        "aborted": "Cancelado.",
        "database_cleared": "Base de datos BORRADA. ðŸ—‘ï¸",
        "welcome_banner": "Rastreador de Tiempo Visual",
        "col_command": "Comando",
        "col_desc": "DescripciÃ³n",
        "col_usage": "Uso",
        "desc_on": "Iniciar temporizador",
        "desc_off": "Detener temporizador",
        "desc_time": "DuraciÃ³n sesiÃ³n actual",
        "desc_time_today": "Tiempo trabajado hoy",
        "desc_db": "Ver ruta base de datos",
        "desc_backup": "Crear copia de seguridad",
        "desc_time_select": "Tiempo en fecha especÃ­fica",
        "desc_time_range": "Tiempo en rango de fechas",
        "desc_init_time": "Hora primer inicio hoy",
        "desc_init_time_when": "Hora primer inicio fecha",
        "desc_clear_all": "Borrar todos los datos",
        "desc_lang": "Ver idioma actual",
        "desc_lang_set": "Cambiar idioma",
        "language_current": "Idioma Actual",
        "language_select": "Seleccionar Idioma",
        "language_updated": "Idioma actualizado a",
        "help_footer": "Use 'work [COMANDO] --help' para mÃ¡s info.",
        "ai_config_menu": "ConfiguraciÃ³n de Proveedor IA",
        "ai_provider_select": "Seleccione Proveedor IA (GEMINI/OPENAI)",
        "ai_key_prompt": "Ingrese API Key",
        "ai_key_saved": "API Key guardada para",
        "ai_analyzing": "Analizando datos con",
        "ai_error": "Error de IA",
        "desc_ai_config": "Configurar Proveedor IA",
        "desc_ai_gen_ask": "Preguntar IA (Contexto Completo)",
        "desc_ai_range_ask": "Preguntar IA (Rango Fechas)",
        "desc_export_csv": "Exportar historial a CSV",
        "desc_export_pdf": "Exportar reporte PDF",
        "export_csv_success": "Datos exportados a CSV",
        "export_pdf_success": "Reporte PDF generado",
        "header_date": "Fecha",
        "header_start": "Inicio",
        "header_end": "Fin",
        "header_duration": "DuraciÃ³n",
        "report_title": "Reporte de Historial Laboral",
        "report_summary": "Resumen",
        "total_sessions": "Total Sesiones",
        "total_duration": "Tiempo Total",
        "desc_load_backup": "Restaurar copia de seguridad",
        "desc_config_backup": "Configurar Auto-Backup",
        "backup_restore_confirm": "ADVERTENCIA: Esto sobrescribirÃ¡ los datos actuales. Â¿Restaurar desde",
        "backup_restored": "Base de datos restaurada con Ã©xito.",
        "backup_not_found": "Archivo de copia de seguridad no encontrado.",
        "backup_config_updated": "Frecuencia de auto-backup configurada en",
        "backup_auto_triggered": "Auto-backup activado",
        "tip_use_description": "Consejo: Puedes aÃ±adir una descripciÃ³n: work ON 'Nombre Tarea'",
        "header_desc": "DescripciÃ³n"
    },
    "FR": {
        "error_critical_dir": "ERREUR CRITIQUE: Impossible de crÃ©er le rÃ©pertoire",
        "error_critical_write": "ERREUR CRITIQUE: Base de donnÃ©es non inscriptible",
        "check_permissions": "Veuillez vÃ©rifier les permissions.",
        "database_error": "Erreur Base de DonnÃ©es",
        "database_locked_hint": "Astuce: La base de donnÃ©es est peut-Ãªtre verrouillÃ©e.",
        "invalid_date_format": "Erreur: Format de date invalide. Utilisez jj/mm/aaaa.",
        "timer_already_running": "Le minuteur tourne dÃ©jÃ ! â³",
        "timer_started": "MINUTEUR DÃ‰MARRÃ‰",
        "timer_not_running": "Le minuteur NE tourne PAS! ðŸ›‘",
        "timer_stopped": "MINUTEUR ARRÃŠTÃ‰",
        "stopped_at": "ArrÃªtÃ© Ã ",
        "duration": "DurÃ©e",
        "current_session": "Session Actuelle",
        "active_timer": "Minuteur Actif",
        "timer_inactive": "Minuteur inactif. ðŸ’¤",
        "daily_summary": "RÃ©sumÃ© Quotidien",
        "total_time_today": "Temps Total Aujourd'hui",
        "database_path": "Chemin Base de DonnÃ©es",
        "database_exist_error": "La base de donnÃ©es n'existe pas encore!",
        "backup_created": "Sauvegarde crÃ©Ã©e",
        "location": "Emplacement",
        "total_time_on": "Temps Total le",
        "historical_data": "DonnÃ©es Historiques",
        "range_summary": "RÃ©sumÃ© de PÃ©riode",
        "total_time": "Temps Total",
        "first_start_today": "Premier DÃ©marrage",
        "no_sessions_today": "Aucune session dÃ©marrÃ©e aujourd'hui.",
        "first_start_on": "Premier DÃ©marrage le",
        "no_sessions_found": "Aucune session trouvÃ©e le",
        "database_empty": "Base de donnÃ©es vide.",
        "clear_confirmation": "Voulez-vous vraiment effacer TOUTES les donnÃ©es? (Sauvegardes sÃ©curisÃ©es)",
        "aborted": "AnnulÃ©.",
        "database_cleared": "Base de donnÃ©es EFFACÃ‰E. ðŸ—‘ï¸",
        "welcome_banner": "Suivi du Temps Visuel",
        "col_command": "Commande",
        "col_desc": "Description",
        "col_usage": "Usage",
        "desc_on": "DÃ©marrer le minuteur",
        "desc_off": "ArrÃªter le minuteur",
        "desc_time": "DurÃ©e session actuelle",
        "desc_time_today": "Temps total aujourd'hui",
        "desc_db": "Voir chemin BDD",
        "desc_backup": "Sauvegarder BDD",
        "desc_time_select": "Temps pour date spÃ©cifique",
        "desc_time_range": "Temps pour plage de dates",
        "desc_init_time": "Premier dÃ©marrage ajd",
        "desc_init_time_when": "Premier dÃ©marrage date",
        "desc_clear_all": "Effacer toutes les donnÃ©es",
        "desc_lang": "Voir langue actuelle",
        "desc_lang_set": "Changer de langue",
        "language_current": "Langue Actuelle",
        "language_select": "SÃ©lectionner Langue",
        "language_updated": "Langue mise Ã  jour vers",
        "help_footer": "Utilisez 'work [COMMANDE] --help' pour plus d'infos.",
        "ai_config_menu": "Configuration Fournisseur IA",
        "ai_provider_select": "SÃ©lectionner Fournisseur IA (GEMINI/OPENAI)",
        "ai_key_prompt": "Entrez ClÃ© API",
        "ai_key_saved": "ClÃ© API enregistrÃ©e pour",
        "ai_analyzing": "Analyse des donnÃ©es avec",
        "ai_error": "Erreur IA",
        "desc_ai_config": "Configurer Fournisseur IA",
        "desc_ai_gen_ask": "Demander IA (Contexte Complet)",
        "desc_ai_range_ask": "Demander IA (Plage Dates)",
        "desc_export_csv": "Exporter en CSV",
        "desc_export_pdf": "Exporter rapport PDF",
        "export_csv_success": "DonnÃ©es exportÃ©es en CSV",
        "export_pdf_success": "Rapport PDF gÃ©nÃ©rÃ©",
        "header_date": "Date",
        "header_start": "DÃ©but",
        "header_end": "Fin",
        "header_duration": "DurÃ©e",
        "report_title": "Rapport d'activitÃ©",
        "report_summary": "RÃ©sumÃ©",
        "total_sessions": "Sessions Totales",
        "total_duration": "DurÃ©e Totale",
        "desc_load_backup": "Restaurer la sauvegarde",
        "desc_config_backup": "Configurer Auto-Sauvegarde",
        "backup_restore_confirm": "ATTENTION: Cela Ã©crasera les donnÃ©es actuelles. Restaurer depuis",
        "backup_restored": "Base de donnÃ©es restaurÃ©e avec succÃ¨s.",
        "backup_not_found": "Fichier de sauvegarde introuvable.",
        "backup_config_updated": "FrÃ©quence de sauvegarde auto rÃ©glÃ©e sur",
        "backup_auto_triggered": "Sauvegarde auto dÃ©clenchÃ©e",
        "tip_use_description": "Astuce: Vous pouvez ajouter une description: work ON 'Nom TÃ¢che'",
        "header_desc": "Description"
    },
    "PT": {
        "error_critical_dir": "ERRO CRÃTICO: NÃ£o Ã© possÃ­vel criar diretÃ³rio",
        "error_critical_write": "ERRO CRÃTICO: Banco de dados nÃ£o gravÃ¡vel",
        "check_permissions": "Verifique as permissÃµes.",
        "database_error": "Erro no Banco de Dados",
        "database_locked_hint": "Dica: O banco pode estar bloqueado ou sem permissÃ£o.",
        "invalid_date_format": "Erro: Formato invÃ¡lido. Use dd/mm/aaaa.",
        "timer_already_running": "O cronÃ´metro jÃ¡ estÃ¡ rodando! â³",
        "timer_started": "CRONÃ”METRO INICIADO",
        "timer_not_running": "O cronÃ´metro NÃƒO estÃ¡ rodando! ðŸ›‘",
        "timer_stopped": "CRONÃ”METRO PARADO",
        "stopped_at": "Parado Ã s",
        "duration": "DuraÃ§Ã£o",
        "current_session": "SessÃ£o Atual",
        "active_timer": "CronÃ´metro Ativo",
        "timer_inactive": "CronÃ´metro inativo. ðŸ’¤",
        "daily_summary": "Resumo DiÃ¡rio",
        "total_time_today": "Tempo Total Hoje",
        "database_path": "Caminho do Banco",
        "database_exist_error": "Banco de dados ainda nÃ£o existe!",
        "backup_created": "Backup criado",
        "location": "Local",
        "total_time_on": "Tempo Total em",
        "historical_data": "Dados HistÃ³ricos",
        "range_summary": "Resumo do PerÃ­odo",
        "total_time": "Tempo Total",
        "first_start_today": "Primeiro InÃ­cio Hoje",
        "no_sessions_today": "Nenhuma sessÃ£o iniciada hoje.",
        "first_start_on": "Primeiro InÃ­cio em",
        "no_sessions_found": "Nenhuma sessÃ£o encontrada em",
        "database_empty": "Banco de dados vazio.",
        "clear_confirmation": "Tem certeza que deseja apagar TODOS os dados? (Backups seguros)",
        "aborted": "Cancelado.",
        "database_cleared": "Banco de dados APAGADO. ðŸ—‘ï¸",
        "welcome_banner": "Rastreador de Tempo Visual",
        "col_command": "Comando",
        "col_desc": "DescriÃ§Ã£o",
        "col_usage": "Uso",
        "desc_on": "Iniciar cronÃ´metro",
        "desc_off": "Parar cronÃ´metro",
        "desc_time": "DuraÃ§Ã£o da sessÃ£o atual",
        "desc_time_today": "Tempo trabalhado hoje",
        "desc_db": "Ver caminho do banco",
        "desc_backup": "Fazer backup do banco",
        "desc_time_select": "Tempo em data especÃ­fica",
        "desc_time_range": "Tempo em intervalo de datas",
        "desc_init_time": "Hora primeiro inÃ­cio hoje",
        "desc_init_time_when": "Hora primeiro inÃ­cio data",
        "desc_clear_all": "Apagar todos os dados",
        "desc_lang": "Ver idioma atual",
        "desc_lang_set": "Mudar idioma",
        "language_current": "Idioma Atual",
        "language_select": "Selecionar Idioma",
        "language_updated": "Idioma atualizado para",
        "help_footer": "Use 'work [COMANDO] --help' para mais info.",
        "ai_config_menu": "ConfiguraÃ§Ã£o Provedor IA",
        "ai_provider_select": "Selecionar Provedor IA (GEMINI/OPENAI)",
        "ai_key_prompt": "Digite a Chave API",
        "ai_key_saved": "Chave API salva para",
        "ai_analyzing": "Analisando dados com",
        "ai_error": "Erro de IA",
        "desc_ai_config": "Configurar Provedor IA",
        "desc_ai_gen_ask": "Perguntar IA (Contexto Completo)",
        "desc_ai_range_ask": "Perguntar IA (Intervalo Datas)",
        "desc_export_csv": "Exportar para CSV",
        "desc_export_pdf": "Exportar relatÃ³rio PDF",
        "export_csv_success": "Dados exportados para CSV",
        "export_pdf_success": "RelatÃ³rio PDF gerado",
        "header_date": "Data",
        "header_start": "InÃ­cio",
        "header_end": "Fim",
        "header_duration": "DuraÃ§Ã£o",
        "report_title": "RelatÃ³rio de HistÃ³rico",
        "report_summary": "Resumo",
        "total_sessions": "SessÃµes Totais",
        "total_duration": "DuraÃ§Ã£o Total",
        "desc_load_backup": "Restaurar backup",
        "desc_config_backup": "Configurar Auto-Backup",
        "backup_restore_confirm": "AVISO: Isso substituirÃ¡ os dados atuais. Restaurar de",
        "backup_restored": "Banco de dados restaurado com sucesso.",
        "backup_not_found": "Arquivo de backup nÃ£o encontrado.",
        "backup_config_updated": "FrequÃªncia de auto-backup definida para",
        "backup_auto_triggered": "Auto-backup acionado",
        "tip_use_description": "Dica: VocÃª pode adicionar uma descriÃ§Ã£o: work ON 'Nome Tarefa'",
        "header_desc": "DescriÃ§Ã£o"
    }
}

def get_text(key: str, lang: str = "EN") -> str:
    """Retrieve text for a given key and language. Fallback to EN."""
    if lang not in TRANSLATIONS:
        lang = "EN"
    return TRANSLATIONS[lang].get(key, TRANSLATIONS["EN"].get(key, key))
